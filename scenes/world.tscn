[gd_scene load_steps=29 format=3 uid="uid://c7lnqmdi1xql8"]

[ext_resource type="Script" path="res://scripts/timer.gd" id="1_80hco"]
[ext_resource type="Script" path="res://scenes/game_manager.gd" id="1_h2bln"]
[ext_resource type="Shader" path="res://shaders/magnifying_glass.gdshader" id="2_um7u2"]
[ext_resource type="Texture2D" uid="uid://dqihjs3hm0upq" path="res://images/list.png" id="3_i0jfi"]
[ext_resource type="Shader" path="res://scenes/spooky.gdshader" id="3_k28m4"]
[ext_resource type="Texture2D" uid="uid://cnxw4jyoqvgb" path="res://images/room.png" id="6_5n200"]
[ext_resource type="FontFile" uid="uid://o0oc414puq6h" path="res://fonts/Brushed.ttf" id="6_5o0av"]
[ext_resource type="PackedScene" uid="uid://dfg16hk4wplry" path="res://scenes/ui.tscn" id="8_fwsjg"]
[ext_resource type="Texture2D" uid="uid://c7qgmdrblpkcq" path="res://images/ticker.png" id="8_mwupj"]
[ext_resource type="AudioStream" uid="uid://blomaoj8aiesa" path="res://sounds/clock.mp3" id="9_mbgoq"]
[ext_resource type="Script" path="res://scenes/clock_ticker.gd" id="9_u7udu"]
[ext_resource type="AudioStream" uid="uid://f7nlic1qj27h" path="res://sounds/room.mp3" id="10_b1le7"]
[ext_resource type="Texture2D" uid="uid://d13w3m404w3yh" path="res://icon.svg" id="15_7b815"]
[ext_resource type="Script" path="res://scripts/clickable_area.gd" id="16_hbrjc"]
[ext_resource type="Shader" path="res://shaders/magnifying_glass_local.gdshader" id="17_1w40i"]
[ext_resource type="Texture2D" uid="uid://bs60kywmljciw" path="res://code-example.png" id="18_1i2a7"]
[ext_resource type="Texture2D" uid="uid://hg5wcqy86wd3" path="res://images/list_near.png" id="18_mak23"]
[ext_resource type="Script" path="res://scripts/preview_manager.gd" id="19_80vbw"]

[sub_resource type="LabelSettings" id="LabelSettings_3vj61"]
line_spacing = 30.0
font = ExtResource("6_5o0av")
font_color = Color(0.137255, 0.137255, 0.137255, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_i3nq1"]
shader = ExtResource("2_um7u2")
shader_parameter/target = Vector2(0.5, 0.5)
shader_parameter/strength_low = 1.0
shader_parameter/strength_high = 4.0
shader_parameter/radius = 108.784
shader_parameter/zoom = 0.7

[sub_resource type="ShaderMaterial" id="ShaderMaterial_i4u70"]
shader = ExtResource("3_k28m4")
shader_parameter/spookyness = 0.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_kw8qu"]
shader = ExtResource("17_1w40i")
shader_parameter/target = Vector2(300, 300)
shader_parameter/radius = 50.0
shader_parameter/strength = 4

[node name="World" type="Node2D" node_paths=PackedStringArray("objective")]
script = ExtResource("1_h2bln")
objective = NodePath("Camera2D/CanvasLayer/ListNear/Label")

[node name="ambient" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("10_b1le7")
autoplay = true

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(512, 512)

[node name="CanvasLayer" type="CanvasLayer" parent="Camera2D"]

[node name="List" type="Sprite2D" parent="Camera2D/CanvasLayer" node_paths=PackedStringArray("nodeToPreview", "node_to_hide", "previewManager")]
position = Vector2(200, 845)
texture = ExtResource("3_i0jfi")
script = ExtResource("16_hbrjc")
id = "list"
nodeToPreview = NodePath("../ListNear")
node_to_hide = NodePath(".")
previewManager = NodePath("../../../PreviewManager")

[node name="ListNear" type="Sprite2D" parent="Camera2D/CanvasLayer"]
visible = false
position = Vector2(525, 488)
texture = ExtResource("18_mak23")

[node name="Label" type="Label" parent="Camera2D/CanvasLayer/ListNear"]
offset_left = -133.0
offset_top = -162.0
offset_right = 136.0
offset_bottom = 180.0
label_settings = SubResource("LabelSettings_3vj61")
horizontal_alignment = 1

[node name="Flyer" type="Node2D" parent="Camera2D/CanvasLayer"]
visible = false
position = Vector2(87, 465)

[node name="Control" parent="Camera2D/CanvasLayer/Flyer" instance=ExtResource("8_fwsjg")]
offset_left = 450.0
offset_top = 200.0
offset_right = 450.0
offset_bottom = 200.0
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="BackgroundBlur" type="ColorRect" parent="Camera2D/CanvasLayer"]
material = SubResource("ShaderMaterial_i3nq1")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
metadata/_edit_use_anchors_ = true

[node name="CanvasLayer2" type="CanvasLayer" parent="Camera2D"]

[node name="SpookyEffects" type="ColorRect" parent="Camera2D/CanvasLayer2"]
material = SubResource("ShaderMaterial_i4u70")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
metadata/_edit_use_anchors_ = true

[node name="Timer" type="Node" parent="."]
script = ExtResource("1_80hco")

[node name="Ticker" type="Sprite2D" parent="Timer"]
z_index = -1
position = Vector2(802, 564)
scale = Vector2(0.132115, 0.259416)
skew = -0.122173
texture = ExtResource("8_mwupj")
offset = Vector2(-18.8276, 70.8765)
script = ExtResource("9_u7udu")

[node name="Clock" type="AudioStreamPlayer2D" parent="Timer"]
stream = ExtResource("9_mbgoq")

[node name="TextureRect" type="TextureRect" parent="."]
z_index = -1
offset_right = 1024.0
offset_bottom = 1024.0
texture = ExtResource("6_5n200")

[node name="letak" type="Sprite2D" parent="." node_paths=PackedStringArray("nodeToPreview", "previewManager")]
visible = false
position = Vector2(497, 844)
rotation = -0.102901
scale = Vector2(1.1566, 1.46106)
texture = ExtResource("15_7b815")
script = ExtResource("16_hbrjc")
id = "click2"
nodeToPreview = NodePath("../Camera2D/CanvasLayer/Flyer")
previewManager = NodePath("../PreviewManager")

[node name="PreviewManager" type="Node2D" parent="."]
script = ExtResource("19_80vbw")

[node name="letak-open" type="Sprite2D" parent="."]
visible = false
material = SubResource("ShaderMaterial_kw8qu")
position = Vector2(515, 512)
scale = Vector2(1.305, 1.305)
texture = ExtResource("18_1i2a7")

[connection signal="clicked_product" from="Camera2D/CanvasLayer/Flyer/Control" to="." method="_on_clicked_product"]
[connection signal="selected_products" from="Camera2D/CanvasLayer/Flyer/Control" to="." method="_on_control_selected_products"]
[connection signal="selected_products" from="Camera2D/CanvasLayer/Flyer/Control" to="Camera2D/CanvasLayer/ListNear/Label" method="_on_control_selected_products"]
[connection signal="time_feed" from="Timer" to="Timer/Ticker" method="_on_tick"]
[connection signal="current_hour" from="Timer/Ticker" to="." method="_on_ticker_current_hour"]
[connection signal="current_hour" from="Timer/Ticker" to="Timer/Ticker" method="_on_current_hour"]
